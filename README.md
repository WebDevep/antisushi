# antisushi
anti-sushi.ru

* Добавлена отмена всех модалок по нажатию клавищи ESC

Обатный звонок

1. Данные отправляются аяксом на серверный скрипт /aseets/json.php

2. Данные отправляются в виде json-строки. Пример:

[{"name":"mailto","value":"webdevep28@gmail.com"},{"name":"target","value":"Mainpage-header callback-form"},{"name":"subject","value":"Заказ обратного звонка с сайта Антисуши"},{"name":"name","value":"Игорь Александров"},{"name":"phone","value":"+7(123) 456-78-94"},{"name":"agreement","value":""}]

3. На стороне сервера (я передал данные php-скрипту, но можно использовать любой обработчик выходного массива json, пеердаваемого методом POST) обработка в файле /assets/sctipt/ajax.php:
"<?php
        if (!isset($_POST['json_data'])) { echo '0'; exit(); };
        $json_data= json_decode($_POST['json_data']);
        $data=array();
        foreach ($json_data as $k => $) {
                switch($k) {
                        case 'mailto': $data['mailto']= $v; break;
                        case 'target': $data['target']= $v; break;
                        case 'subject': $data['subject']= $v; break;
                        case 'name': $data['name']= $v; break;
                        case 'phone': $data['phone']= $v; break;
                }
        }
        if ($data['mailto']) {
                $to = $data['mailto']
                $subject = $data['subject'];
                $message = '<ul><li>Телефон:'.$data['phone'].'</li><li>Имя'.$data['name'].'</li>Тточка захвата<li>'.$data['target'].'</li></ul>';
                $headers = ""From: anti-sushi.ru <info@anti-sushi.ru>\r\nContent-type: text/html; charset=utf-8 \r\n"";
                if (mail ($to, $subject, $message, $headers)) echo '1'; else echo '';
        }
        echo '0';
}
?>"

Фильтры

Грузятся в зависимости от текущего URL:

"Функция addFilter (title, id) - создаёт объект фильтра с указанным ID.

Все ID я взял со старого сайта.

Используются тут: <input type=""hidden"" value=""N"" name=""'+id+'"" id=""'+id+'"">"

Отчёт за 11.02.2019:

1	Перенести конструктор https://anti-sushi.ru/catalog/wok/ на новый сайт - задача отложена

2	Обратный звонок (сделать формы, отправлять на сервер post-запрос) - выполнено

3	Фильтры по ингредиентам (см. оригинальный сайт). И помимо этих фильтров, добавится ещё сортировки: по умолчанию, и по цене - убывание/возрастание - задача выполнена/приостановлена

4	Понять почему такая маленькая оценка сайта на сервисах типа PageSpeed Insights и исправить ситуацию. Месяц назад для компьютеров она была 98-99. На этой стадии Вам придётся скорее всего достаточно тесно работать с текущим исполнителем.

        Проведён аудит, найдены уязвимости, в частности перегруз скриптами быстрой области загрузки, а так же слабый контроль графического материала на страницах быстрого доступа (главная страница)
        
5	В десктопе:  -подарки за заказ -мелкие глюки в чекауте типа прокрутки браузера вверх при клике на изменение количества, не правильное изначальное отображение количества персон, и так далее. В мобильной: -тоже самое -личный кабинет -тормоза -при нажимани на энергетическую ценность перебрасывает вверх страницы. - проводился аудит, ошибки не были выявлены к сожалению, на текущей сборке проекта. ПО: Linux Ubuntu 18.04 AMD64, Mozilla Firefox stable 64-bit, Google Chrome stable 64-bit, Opera stable 64-bit, linux-based browsering software

5.1	Выбрать подарок - центрировать блок — правки по верстке. Выполнено

5.2	Форма с подаркоми не убирается, если не выбрать подарок — правки по верстке. Выполнено

5.3	Кнопка "Выбрать подарок" не исчезает кнопка — правки по фронтенду. Выполнено

5.4	Выбор подарка 1 и 2 уровня - нет надписей на кнопках, пишет Native — правки по фронтенду. Выполнено

5.5	Кноппки справа некликабельные  — правки по фронтенду. Выполнено

5.7	"Ошибка JS при удалении элементов из корзины:

TypeError: data.BasketElements is undefined" — обнаружена критическая уязвимость в ходе аудита системы в поисках иных ошибок, пинформация передана заказчику скринкастом

5.8	Проблемы с пиццей Diablo - не удаляется, вызывает ошибки, не изменяется количество - снихронизировано с пп. 5.8

